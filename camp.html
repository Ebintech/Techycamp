// Add this in handleRequest function
if (request.method === 'GET' && path === '/get-referrer-telegram') {
  return getReferrerTelegram(request);
}

// Add this new function
async function getReferrerTelegram(request) {
  try {
    const url = new URL(request.url);
    const referrerId = url.searchParams.get('ref');
    
    if (!referrerId) {
      return jsonResponse({ success: false });
    }

    const googleUrl = `${GOOGLE_SCRIPT_URL}?action=getReferrerTelegram&ref=${encodeURIComponent(referrerId)}`;
    const response = await fetch(googleUrl);
    const data = await response.json();

    return jsonResponse(data);

  } catch (error) {
    return jsonResponse({ success: false });
  }
}
